Project Sdk="Microsoft.NET.Sdk">

        <PropertyGroup>
                <TargetFramework>net7.0</TargetFramework>
                <DebugType>portable</DebugType>
                <CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
        </PropertyGroup>

        <ItemGroup>
          <None Remove="Lib.zip" />
        </ItemGroup>

        <ItemGroup>
          <EmbeddedResource Include="Lib.zip">
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
          </EmbeddedResource>
        </ItemGroup>

        <ItemGroup>
          <PackageReference Include="IronPython" Version="3.4.0-beta1" />
        </ItemGroup>

        <ItemGroup>
                <PluginFiles Include="$(TargetPath)" />
        </ItemGroup>
        <Target Name="CopyFiles" AfterTargets="Build">
                <Copy SourceFiles="@(PluginFiles)" DestinationFolder="$(SolutionDir)\bin\" SkipUnchangedFiles="false" />
        </Target>
        <ItemGroup>
                <ProjectReference Include="..\..\Athena.Utilities\Athena.Utilities.csproj" />
                <ProjectReference Include="..\Athena.Plugins\Athena.Plugins.csproj" />
        </ItemGroup>
        <ItemGroup>
                <PluginDLLs Include="$(TargetDir)Microsoft.Scripting.dll;$(TargetDir)Microsoft.Scripting.dll"/>
                <PluginDLLs Include="$(TargetDir)IronPython.Modules.dll;$(TargetDir)IronPython.Modules.dll"/>
                <PluginDLLs Include="$(TargetDir)IronPython.dll;$(TargetDir)IronPython.dll"/>
                <PluginDLLs Include="$(TargetDir)System.CodeDom.dll;$(TargetDir)System.CodeDom.dll"/>
                <PluginDLLs Include="$(TargetDir)Microsoft.Scripting.dll;$(TargetDir)Microsoft.Dynamic.dll"/>
        </ItemGroup>
        <Target Name="CopyDLLs" AfterTargets="Build">
                <Copy SourceFiles="@(PluginDLLs)" DestinationFolder="$(SolutionDir)/bin/common/" SkipUnchangedFiles="false" />
        </Target>
</Project>
